(this["webpackJsonppath-optimiser"]=this["webpackJsonppath-optimiser"]||[]).push([[0],{20:function(e,n,t){e.exports=t(31)},25:function(e,n,t){},31:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(13),i=t.n(r),c=(t(25),t(19)),l=t(9),u=t.n(l),s=t(14),d=t(6),f=t(15),p=t(3),m=t(1),h=t(2),b={maxwidthDesktop:1100,maxwidthTablet:768,maxwidthMobile:700,paddingHorizontalDesktop:4,paddingHorizontalTablet:2.5,paddingHorizontalMobile:2};function g(){var e=Object(m.a)(["\n  max-width: ","px;\n  margin: 0 auto;\n  margin-top: 2em;\n"]);return g=function(){return e},e}var v=h.a.div(g(),b.maxwidthDesktop),w=function(e){var n=e.children;return o.a.createElement(v,null,n)},O=function(e){var n=e.setMap,t=e.group,o=e.platform,r=Object(a.useRef)();return Object(a.useEffect)((function(){var e=window.H,a=o.createDefaultLayers(),i=new e.Map(r.current,a.vector.normal.map,{center:{lat:4.4255,lng:114.01},zoom:12,pixelRatio:window.devicePixelRatio||1});new e.mapevents.Behavior(new e.mapevents.MapEvents(i)),e.ui.UI.createDefault(i,a);n(i),i.addObject(t)}),[]),a.createElement("div",{ref:r,style:{height:"500px"}})};function j(){var e=Object(m.a)(["\n  width: 100%;\n  display: flex;\n  box-sizing: border-box;\n\n  padding: 5px;\n"]);return j=function(){return e},e}function E(){var e=Object(m.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]);return E=function(){return e},e}function y(){var e=Object(m.a)(["\n  width: 100%;\n  padding: 12px 20px;\n  height: 60px;\n  margin: 8px 0;\n  display: inline-block;\n  background-color: #ffffff;\n  border-radius: 5px;\n  border-width: 0px;\n  box-sizing: border-box;\n  font-size: 16px;\n  background-color: #f1f1f1;\n"]);return y=function(){return e},e}var k=h.a.input(y()),x=h.a.div(E()),S=h.a.div(j()),D=function(e){var n=e.placeholder,t=e.id,r=e.handleLocation,i=Object(a.useState)(!1),c=Object(p.a)(i,2),l=c[0],u=c[1],s=Object(a.useState)(""),d=Object(p.a)(s,2),f=d[0],m=d[1],h=Object(a.useState)([]),b=Object(p.a)(h,2),g=b[0],v=b[1],w=Object(a.useRef)(null),O=new window.H.service.Platform({apikey:"UGFXs8I22uzjWNvtbtIgyfQbDaYqAAXBuNei1RlWDzk"}).getSearchService(),j=function(e){var n=w.current;n&&!n.contains(e.target)&&u(!1)};Object(a.useEffect)((function(){return window.addEventListener("mousedown",j),function(){window.removeEventListener("mousedown",j)}}));return o.a.createElement("div",{ref:w},o.a.createElement(k,{id:t,onClick:function(){return u(!l)},onChange:function(e){return function(e){e.preventDefault(),u(!0),m(e.target.value),e.target.value.length>0&&O.autosuggest({q:e.target.value,at:"4.4255,114.01"},(function(e){v(e.items)}))}(e)},value:f,placeholder:n,type:"text"}),l&&o.a.createElement(x,null,g.map((function(e,n){return o.a.createElement(S,{onClick:function(){return function(e){m(e.title),r(t,e),u(!1)}(e)},key:n},o.a.createElement("p",null,e.title))}))))};function M(){var e=Object(m.a)(["\n  margin-top: 1em;\n  width: 100%;\n  height: 30px;\n  background-color: #ccc;\n"]);return M=function(){return e},e}function z(){var e=Object(m.a)(["\n  width: 100%;\n  height: 30px;\n  background-color: #ccc;\n"]);return z=function(){return e},e}var L=h.a.input(z()),P=h.a.button(M()),R=function(e){var n=e.handleLocation,t=e.handleSubmit,a=e.handleDisplayPath,r=e.loading,i=e.location,c=e.order;return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:t},o.a.createElement(D,{placeholder:"Type Home address",handleLocation:n,id:"dest0"}),o.a.createElement(D,{placeholder:"Destination address #1",id:"dest1",handleLocation:n}),o.a.createElement(D,{placeholder:"Destination address #2",id:"dest2",handleLocation:n}),o.a.createElement(D,{placeholder:"Destination address #3",id:"dest3",handleLocation:n}),o.a.createElement(L,{type:"submit",value:"Show in Map"})),o.a.createElement(P,{onClick:a},r?"Calculating...":"Optimise Path"),o.a.createElement("div",null,o.a.createElement("h4",null,"Optimised Path: "),c.map((function(e,n){return o.a.createElement("p",{key:n},n+1,": ",i["dest".concat(e)].title)}))))};function A(){var e=Object(m.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 1em;\n"]);return A=function(){return e},e}var H=h.a.div(A()),W=window.H,C=new W.service.Platform({apikey:"UGFXs8I22uzjWNvtbtIgyfQbDaYqAAXBuNei1RlWDzk"}),I=new W.map.Group,N=C.getRoutingService(null,8),B=function(){var e,n=Object(a.useState)({dest0:{},dest1:{},dest2:{},dest3:{}}),t=Object(p.a)(n,2),r=t[0],i=t[1],l=Object(a.useState)([0]),m=Object(p.a)(l,2),h=m[0],b=m[1],g=Object(a.useState)(!1),v=Object(p.a)(g,2),j=v[0],E=v[1],y=[[],[],[],[]],k=[[],[],[],[]],x=0,S=0,D=0,M=Object(a.useState)(null),z=Object(p.a)(M,2),L=(z[0],z[1]),P=function(){var n=Object(s.a)(u.a.mark((function n(t){var a,o,r,i,c,l;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.routes.length&&(a=t.routes[0].sections[0],o=a.summary.length,r=W.geo.LineString.fromFlexiblePolyline(a.polyline),i=new W.map.Polyline(r,{style:{strokeColor:"blue",lineWidth:3}}),c=new W.map.Marker(a.departure.place.location),l=new W.map.Marker(a.arrival.place.location),I.addObjects([i,c,l]),y[S][D]=o,k[S][D]=[i,c,l],D>=3?(S++,D=0):D++,16===++x&&(e=JSON.parse(JSON.stringify(y)),J(y[0])));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),A=function(){Object.keys(r).forEach((function(e,n){Object.keys(r).forEach((function(n,t){B(1e3,(function(){!function(e,n){var t,a;N.calculateRoute((a=n,{routingMode:"fast",transportMode:"car",origin:"".concat((t=e).position.lat,",").concat(t.position.lng),destination:"".concat(a.position.lat,",").concat(a.position.lng),return:["polyline","summary"]}),P,(function(e){alert(e.message)}))}(r[e],r[n])}))}))}))},B=function(){var e=[];return function(n,t){e.push({delay:n,cb:t}),1===e.length&&function n(){e.length>0&&setTimeout((function(){e.shift().cb(),n()}),e[0].delay)}()}}(),J=function n(t){var a=5e4,o=5e4;t.reduce((function(e,n){return e+n}),0)>0?(t.forEach((function(e,n){0!==e&&e<a&&(a=e,o=n)})),console.log(a,o),e.forEach((function(n,t){e[t][0]=0,e[t][o]=0})),b((function(e){return[].concat(Object(c.a)(e),[o])})),n(e[o])):(console.log("end"),console.log(y),T())},T=function(){E(!1),I.removeAll(),h.forEach((function(e,n){I.addObjects(k[n][e])}))};return o.a.createElement(w,null,o.a.createElement(H,null,o.a.createElement(O,{setMap:L,group:I,platform:C}),o.a.createElement(R,{handleLocation:function(e,n){i(Object(f.a)({},r,Object(d.a)({},e,n))),console.log(n)},handleSubmit:function(e){e.preventDefault(),I.removeAll(),Object.keys(r).forEach((function(e){if(Object.keys(r[e]).length>0){var n=new W.map.Marker(r[e].position);I.addObject(n)}}))},handleDisplayPath:function(){A(),b((function(){return[]})),I.removeAll(),E(!0)},loading:j,location:r,order:h})))},J=function(){return o.a.createElement(B,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(28).config(),i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.345d1d65.chunk.js.map